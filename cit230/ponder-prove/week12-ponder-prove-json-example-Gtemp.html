<!DOCTYPE html>
<html>
  <head>
   <title>Dubai Hotels</title>
  </head>

  <body onload = "loadMap()">
      <div id="demo"></div>
    <h2>Dubai Hotels</h2>
    <div id = "map" style = "width:640px; height:480px;"></div>
      <script>
function getJSONMarkers(){
//    document.getElementById("demo").innerHTML = "test2";
//const markers = [
         var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = function() {
//              document.getElementById("demo").innerHTML = "test2";
        if (this.readyState == 4 && this.status == 200) {
//            document.getElementById("demo").innerHTML = "test3";
        var myObj = JSON.parse(this.responseText);
         document.getElementById("demo").innerHTML = "test4";   
            
    
//        document.getElementById("demo").innerHTML = myObj.pets[0].animal 
//        document.getElementById("demo").innerHTML = "test2";

//xmlhttp.open("GET", "json_demo.txt", true);
//xmlhttp.send();
      
//            myObj.pets[0].animal;
//            {
//    "name":"John",
//    "age":31,
//    "pets":[
//        { "animal":"dog", "name":"Fido" },
//        { "animal":"cat", "name":"Felix" },
//        { "animal":"hamster", "name":"Lightning" }
//    ]
//}

//        document.getElementById("demo").innerHTML = myObj.name;
             }
            };
            xmlhttp.open("GET", "markers-B.txt", true);
            xmlhttp.send();  
// ];               
return myObj;          
}
        // fake JSON call
//        function getJSONMarkers() {
//          const markers = [
//            {
//              name:  "Rixos The Palm",
//              location: [25.1212, 55.1535]
//            },
//            {
//              name: "Shangri-La Hotel",
//              location: [25.2084, 55.2719]
//            },
//            {
//              name: "Grand Hyatt",
//              location: [25.2285, 55.3273]
//            }
//          ];
//          return markers;
//        }

        function loadMap() {
          // Initialize Google Maps
          const mapOptions = {
            center:new google.maps.LatLng(25.2048, 55.2708),
            zoom: 11
          }
          const map = new google.maps.Map(document.getElementById("map"), mapOptions);

          // Load JSON Data
          const hotelMarkers = getJSONMarkers();

          // Initialize Google Markers
          for(hotel of hotelMarkers) {
            let marker = new google.maps.Marker({
              map: map,
              position: new google.maps.LatLng(hotel.location[0], hotel.location[1]),
              title: hotel.name
            })
          }
        }
      </script>
      <script src = "https://maps.googleapis.com/maps/api/js"></script>
  </body>
</html>